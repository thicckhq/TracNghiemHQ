<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá th·ªëng Tr·∫Øc nghi·ªám H·∫£i quan</title>
    <!-- T·∫£i Tailwind CSS t·ª´ CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Times New Roman', Times, serif;
        }
        /* CSS t√πy ch·ªânh cho pop-up (modal) */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: #ffffff;
            padding: 2.5rem;
            border-radius: 2rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
            max-width: 90%;
            width: 500px;
            max-height: 90%;
            overflow-y: auto;
            position: relative;
            animation: fadeIn 0.3s ease-out;
        }
        .hidden {
            display: none;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-500 to-purple-600 min-h-screen flex items-center justify-center p-4">

    <!-- Container ch√≠nh c·ªßa ·ª©ng d·ª•ng -->
    <div class="bg-white bg-opacity-90 p-10 rounded-3xl shadow-2xl w-full max-w-4xl text-center">
        <!-- Ti√™u ƒë·ªÅ v√† M√¥ t·∫£ -->
        <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-2">H·ªá th·ªëng √în thi H·∫£i quan</h1>
        <p class="text-gray-600 mb-10 text-lg">Luy·ªán t·∫≠p, thi th·ª≠ v√† n√¢ng cao ki·∫øn th·ª©c nghi·ªáp v·ª• khai b√°o h·∫£i quan.</p>

        <!-- Thanh menu ch√≠nh -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6">
            <button id="adminBtn" data-modal-target="adminModal" class="bg-red-600 text-white font-semibold py-4 px-8 rounded-2xl shadow-lg hover:bg-red-700 transition-all duration-300 transform hover:scale-105">
                Qu·∫£n tr·ªã Admin
            </button>
            <button id="knowledgeBtn" data-modal-target="knowledgeModal" class="bg-purple-600 text-white font-semibold py-4 px-8 rounded-2xl shadow-lg hover:bg-purple-700 transition-all duration-300 transform hover:scale-105">
                T·ªïng h·ª£p ki·∫øn th·ª©c
            </button>
            <button id="practiceBtn" data-modal-target="practiceModal" class="bg-blue-600 text-white font-semibold py-4 px-8 rounded-2xl shadow-lg hover:bg-blue-700 transition-all duration-300 transform hover:scale-105">
                √în t·∫≠p tr·∫Øc nghi·ªám
            </button>
            <button id="wrongAnswersBtn" data-modal-target="wrongAnswersModal" class="bg-yellow-500 text-white font-semibold py-4 px-8 rounded-2xl shadow-lg hover:bg-yellow-600 transition-all duration-300 transform hover:scale-105">
                C√¢u ƒë√£ tr·∫£ l·ªùi sai
            </button>
            <button id="mockExamBtn" data-modal-target="mockExamModal" class="bg-green-600 text-white font-semibold py-4 px-8 rounded-2xl shadow-lg hover:bg-green-700 transition-all duration-300 transform hover:scale-105">
                Thi th·ª≠
            </button>
            <button id="accountBtn" data-modal-target="accountModal" class="bg-gray-700 text-white font-semibold py-4 px-8 rounded-2xl shadow-lg hover:bg-gray-800 transition-all duration-300 transform hover:scale-105">
                T√†i kho·∫£n c·ªßa t√¥i
            </button>
        </div>
        
        <!-- Th√¥ng tin t√°c gi·∫£ v√† Li√™n h·ªá -->
        <div class="mt-8 text-right text-gray-600 text-sm">
            <p>T√°c gi·∫£: Nguy·ªÖn Do√£n Vinh</p>
            <button id="showContactBtn" data-modal-target="contactModal" class="mt-2 text-teal-600 hover:text-teal-800 transition-colors duration-200">
                Hi·ªán th√¥ng tin li√™n h·ªá
            </button>
        </div>
    </div>

    <!-- Modals cho t·ª´ng menu -->

    <!-- Modal: Qu·∫£n tr·ªã Admin -->
    <div id="adminModal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2 class="text-2xl font-bold mb-4 text-center text-gray-800">Qu·∫£n tr·ªã Admin</h2>
            <p class="text-gray-600 mb-4 text-center">
                ƒê√¢y l√† n·ªôi dung d√†nh cho qu·∫£n tr·ªã vi√™n.
                ƒê·ªÉ truy c·∫≠p, b·∫°n c·∫ßn ƒëƒÉng nh·∫≠p v·ªõi quy·ªÅn admin.
            </p>
            <div class="space-y-4">
                <input type="text" placeholder="T√™n ƒëƒÉng nh·∫≠p" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                <input type="password" placeholder="M·∫≠t kh·∫©u" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
            </div>
            <div class="mt-6 flex justify-center">
                <button class="bg-red-600 text-white font-semibold py-3 px-8 rounded-lg hover:bg-red-700 transition-all duration-300 mr-2">ƒêƒÉng nh·∫≠p</button>
                <button data-modal-close="adminModal" class="bg-gray-300 text-gray-800 font-semibold py-3 px-8 rounded-lg hover:bg-gray-400 transition-all duration-300">ƒê√≥ng</button>
            </div>
        </div>
    </div>
    
    <!-- Modal: T·ªïng h·ª£p ki·∫øn th·ª©c -->
    <div id="knowledgeModal" class="modal-overlay hidden">
        <div class="modal-content text-left">
            <h2 class="text-2xl font-bold mb-4 text-center text-gray-800">T·ªïng h·ª£p ki·∫øn th·ª©c</h2>
            <p class="text-gray-600 mb-6 text-center">C√°c vƒÉn b·∫£n ph√°p lu·∫≠t quan tr·ªçng v·ªÅ th·ªß t·ª•c h·∫£i quan.</p>
            
            <div class="space-y-4">
                <div class="p-4 bg-gray-100 rounded-lg shadow-sm">
                    <p class="font-semibold text-lg text-gray-800">Lu·∫≠t H·∫£i quan</p>
                    <p class="text-sm text-gray-600 mb-2">Lu·∫≠t s·ªë 54/2014/QH13</p>
                    <a href="https://thuvienphapluat.vn/van-ban/Xuat-nhap-khau/Luat-Hai-quan-2014-256627.aspx" target="_blank" class="text-blue-600 hover:text-blue-800 transition-colors duration-200 underline">
                        Xem chi ti·∫øt t·∫°i Th∆∞ vi·ªán Ph√°p lu·∫≠t
                    </a>
                </div>
                <div class="p-4 bg-gray-100 rounded-lg shadow-sm">
                    <p class="font-semibold text-lg text-gray-800">Ngh·ªã ƒë·ªãnh 08/2015/Nƒê-CP</p>
                    <p class="text-sm text-gray-600 mb-2">Quy ƒë·ªãnh chi ti·∫øt v√† bi·ªán ph√°p thi h√†nh Lu·∫≠t H·∫£i quan v·ªÅ th·ªß t·ª•c, ki·ªÉm tra, gi√°m s√°t h·∫£i quan</p>
                    <a href="https://thuvienphapluat.vn/van-ban/Xuat-nhap-khau/Nghi-dinh-08-2015-ND-CP-quy-dinh-chi-tiet-va-bien-phap-thi-hanh-Luat-Hai-quan-273611.aspx" target="_blank" class="text-blue-600 hover:text-blue-800 transition-colors duration-200 underline">
                        Xem chi ti·∫øt t·∫°i Th∆∞ vi·ªán Ph√°p lu·∫≠t
                    </a>
                </div>
                <div class="p-4 bg-gray-100 rounded-lg shadow-sm">
                    <p class="font-semibold text-lg text-gray-800">Th√¥ng t∆∞ 38/2015/TT-BTC</p>
                    <p class="text-sm text-gray-600 mb-2">Quy ƒë·ªãnh v·ªÅ th·ªß t·ª•c h·∫£i quan; ki·ªÉm tra, gi√°m s√°t h·∫£i quan; thu·∫ø xu·∫•t kh·∫©u, thu·∫ø nh·∫≠p kh·∫©u v√† qu·∫£n l√Ω thu·∫ø ƒë·ªëi v·ªõi h√†ng h√≥a xu·∫•t kh·∫©u, nh·∫≠p kh·∫©u</p>
                    <a href="https://thuvienphapluat.vn/van-ban/Xuat-nhap-khau/Thong-tu-38-2015-TT-BTC-thu-tuc-hai-quan-kiem-tra-giam-sat-hai-quan-thue-xuat-khau-45451.aspx" target="_blank" class="text-blue-600 hover:text-blue-800 transition-colors duration-200 underline">
                        Xem chi ti·∫øt t·∫°i Th∆∞ vi·ªán Ph√°p lu·∫≠t
                    </a>
                </div>
            </div>
            
            <div class="mt-6 flex justify-center">
                <button data-modal-close="knowledgeModal" class="bg-gray-300 text-gray-800 font-semibold py-3 px-8 rounded-lg hover:bg-gray-400 transition-all duration-300">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <!-- Modal: √în t·∫≠p tr·∫Øc nghi·ªám -->
    <div id="practiceModal" class="modal-overlay hidden">
        <div class="modal-content text-left">
            <h2 id="practiceModalTitle" class="text-2xl font-bold mb-6 text-center text-gray-800">√în t·∫≠p tr·∫Øc nghi·ªám</h2>
            
            <div id="subjectSelection">
                <p class="text-gray-600 mb-4 font-semibold">Ch·ªçn M√¥n:</p>
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                    <button class="subjectBtn bg-blue-500 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-600 transition-all duration-300" data-subject="customs_law">
                        Ph√°p lu·∫≠t h·∫£i quan
                    </button>
                    <button class="subjectBtn bg-blue-500 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-600 transition-all duration-300" data-subject="foreign_trade">
                        K·ªπ thu·∫≠t nghi·ªáp v·ª• ngo·∫°i th∆∞∆°ng
                    </button>
                    <button class="subjectBtn bg-blue-500 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-600 transition-all duration-300" data-subject="customs_tech">
                        K·ªπ thu·∫≠t nghi·ªáp v·ª• h·∫£i quan
                    </button>
                </div>
            </div>

            <div id="topicSelection" class="hidden mt-6">
                <p class="text-gray-600 mb-4 font-semibold">Ch·ªçn Chuy√™n ƒë·ªÅ:</p>
                <div id="topicList" class="space-y-3">
                    <!-- Danh s√°ch chuy√™n ƒë·ªÅ s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JavaScript -->
                </div>
            </div>

            <div class="mt-8 flex justify-center">
                <button id="backToSubjectsBtn" class="bg-gray-300 text-gray-800 font-semibold py-3 px-8 rounded-lg hover:bg-gray-400 transition-all duration-300 hidden mr-2">
                    Quay l·∫°i
                </button>
                <button data-modal-close="practiceModal" class="bg-gray-300 text-gray-800 font-semibold py-3 px-8 rounded-lg hover:bg-gray-400 transition-all duration-300">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <!-- Modal: C√¢u ƒë√£ tr·∫£ l·ªùi sai -->
    <div id="wrongAnswersModal" class="modal-overlay hidden">
        <div class="modal-content text-left">
            <h2 class="text-2xl font-bold mb-6 text-center text-gray-800">C√¢u ƒë√£ tr·∫£ l·ªùi sai</h2>
            
            <div id="wrongAnswersContent">
                <!-- N·ªôi dung s·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
            </div>

            <div class="mt-8 flex justify-center">
                <button data-modal-close="wrongAnswersModal" class="bg-gray-300 text-gray-800 font-semibold py-3 px-8 rounded-lg hover:bg-gray-400 transition-all duration-300">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <!-- Modal: Thi th·ª≠ -->
    <div id="mockExamModal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2 class="text-2xl font-bold mb-2 text-center text-gray-800">Thi th·ª≠</h2>
            <p class="text-sm text-gray-600 mb-4 text-center">
                H√¨nh th·ª©c thi: 80 c√¢u tr·∫Øc nghi·ªám<br>
                Th·ªùi gian: 50 ph√∫t / 1 m√¥n thi<br>
                <span class="text-xs italic text-gray-500">(M√¥ ph·ªèng theo giao di·ªán v√† c√°ch th·ª©c thi ch√≠nh th·ª©c)</span>
            </p>
            
            <p class="text-gray-600 mb-4 font-semibold text-center">H√£y ch·ªçn m√¥n thi:</p>
            <div id="mockExamSubjectList" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <!-- Danh s√°ch m√¥n thi s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JavaScript -->
            </div>
            
            <div class="mt-6 flex justify-center">
                <button data-modal-close="mockExamModal" class="bg-gray-300 text-gray-800 font-semibold py-3 px-8 rounded-lg hover:bg-gray-400 transition-all duration-300">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <!-- Modal X√°c nh·∫≠n B·∫Øt ƒë·∫ßu Thi th·ª≠ -->
    <div id="confirmMockExamModal" class="modal-overlay hidden">
        <div class="modal-content text-center">
            <h2 class="text-2xl font-bold mb-2 text-gray-800">X√°c nh·∫≠n Thi th·ª≠</h2>
            <p id="confirmMessage" class="text-gray-600 mb-6">Th·ªùi gian l√†m b√†i l√† 50 ph√∫t. B·∫°n ch·∫Øc ch·∫Øn mu·ªën b·∫Øt ƒë·∫ßu?</p>
            <div class="flex justify-center space-x-4">
                <button id="startMockExamBtn" class="bg-green-600 text-white font-semibold py-3 px-8 rounded-lg hover:bg-green-700 transition-all duration-300">B·∫Øt ƒë·∫ßu</button>
                <button data-modal-close="confirmMockExamModal" class="bg-gray-300 text-gray-800 font-semibold py-3 px-8 rounded-lg hover:bg-gray-400 transition-all duration-300">H·ªßy</button>
            </div>
        </div>
    </div>
    
    <!-- Modal: T√†i kho·∫£n c·ªßa t√¥i -->
    <div id="accountModal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2 class="text-2xl font-bold mb-4 text-center text-gray-800">T√†i kho·∫£n c·ªßa t√¥i</h2>

            <!-- Ph·∫ßn Th√¥ng tin c√° nh√¢n -->
            <div class="mb-6">
                <div class="flex justify-between items-center mb-3">
                    <h3 class="text-xl font-bold text-gray-700">Th√¥ng tin c√° nh√¢n</h3>
                    <div class="flex items-center space-x-2">
                        <a href="#" class="text-sm text-blue-600 hover:text-blue-800 underline" onclick="showCustomMessage('T√≠nh nƒÉng ch·ªânh s·ª≠a ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn.')">Ch·ªânh s·ª≠a</a>
                        <span class="text-gray-400">|</span>
                        <a href="#" class="text-sm text-red-600 hover:text-red-800 underline" onclick="showCustomMessage('T√≠nh nƒÉng ƒëƒÉng xu·∫•t ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn.')">ƒêƒÉng xu·∫•t</a>
                    </div>
                </div>
                <ul class="text-left space-y-2">
                    <li class="p-3 bg-gray-100 rounded-lg"><span class="font-semibold">T√™n ƒëƒÉng nh·∫≠p:</span> user_vinh</li>
                    <li class="p-3 bg-gray-100 rounded-lg"><span class="font-semibold">M·∫≠t kh·∫©u:</span> ********</li>
                    <li class="p-3 bg-gray-100 rounded-lg"><span class="font-semibold">T√™n hi·ªÉn th·ªã:</span> Nguy·ªÖn Do√£n Vinh</li>
                    <li class="p-3 bg-gray-100 rounded-lg"><span class="font-semibold">Email:</span> vinh.nguyen@example.com</li>
                    <li class="p-3 bg-gray-100 rounded-lg"><span class="font-semibold">S·ªë ƒëi·ªán tho·∫°i:</span> 0912345678</li>
                    <li class="p-3 bg-gray-100 rounded-lg"><span class="font-semibold">C√¥ng ty:</span> ABC Company</li>
                </ul>
            </div>

            <!-- Ph·∫ßn Th√¥ng tin s·ª≠ d·ª•ng -->
            <div>
                <div class="flex justify-between items-center mb-3">
                    <h3 class="text-xl font-bold text-gray-700">Th√¥ng tin s·ª≠ d·ª•ng</h3>
                    <a href="#" class="text-sm text-green-600 hover:text-green-800 underline" onclick="showCustomMessage('T√≠nh nƒÉng gia h·∫°n b·∫£n quy·ªÅn ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn.')">ƒêƒÉng k√Ω/Gia h·∫°n</a>
                </div>
                <ul class="text-left space-y-2">
                    <li class="p-3 bg-gray-100 rounded-lg"><span class="font-semibold">M√¥n thi ƒëƒÉng k√Ω:</span> Ph√°p lu·∫≠t h·∫£i quan, K·ªπ thu·∫≠t nghi·ªáp v·ª• ngo·∫°i th∆∞∆°ng</li>
                    <li class="p-3 bg-gray-100 rounded-lg"><span class="font-semibold">Th·ªùi h·∫°n s·ª≠ d·ª•ng:</span> ƒê·∫øn 31/12/2025</li>
                </ul>
            </div>

            <div class="mt-6 flex justify-center">
                <button data-modal-close="accountModal" class="bg-gray-300 text-gray-800 font-semibold py-3 px-8 rounded-lg hover:bg-gray-400 transition-all duration-300">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <!-- Modal: Li√™n h·ªá Admin -->
    <div id="contactModal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2 class="text-2xl font-bold mb-4 text-center text-gray-800">Li√™n h·ªá Admin</h2>
            <p class="text-gray-600 mb-4 text-center">
                G·ª≠i c√¢u h·ªèi ho·∫∑c y√™u c·∫ßu h·ªó tr·ª£ ƒë·∫øn qu·∫£n tr·ªã vi√™n.
            </p>
            <div class="space-y-4">
                <input type="text" placeholder="H·ªç v√† t√™n" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500">
                <input type="email" placeholder="Email c·ªßa b·∫°n" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500">
                <textarea placeholder="N·ªôi dung tin nh·∫Øn..." rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500"></textarea>
            </div>
            <div class="mt-6 flex justify-center">
                <button class="bg-teal-600 text-white font-semibold py-3 px-8 rounded-lg hover:bg-teal-700 transition-all duration-300 mr-2">G·ª≠i tin nh·∫Øn</button>
                <button data-modal-close="contactModal" class="bg-gray-300 text-gray-800 font-semibold py-3 px-8 rounded-lg hover:bg-gray-400 transition-all duration-300">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <!-- Modal: √în t·∫≠p/Luy·ªán t·∫≠p -->
    <div id="quizModal" class="modal-overlay hidden">
        <div class="modal-content text-left">
            <div class="flex items-center justify-between mb-4">
                <h2 id="quizModalTitle" class="text-2xl font-bold text-gray-800">Quiz Title</h2>
                <button id="quizModalBackBtn" class="bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg hover:bg-gray-400 transition-all duration-300">
                    Quay l·∫°i
                </button>
            </div>
            <p id="quizStatus" class="text-gray-600 mb-4 text-center">C√¢u 1/5</p>
            
            <div id="quizContent">
                <!-- N·ªôi dung c√¢u h·ªèi s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JavaScript -->
                <p id="questionText" class="text-lg font-semibold text-gray-700 mb-4"></p>
                <div id="answersContainer" class="space-y-3">
                    <!-- ƒê√°p √°n s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JavaScript -->
                </div>
            </div>

            <div id="quizFeedback" class="text-center mt-4 hidden">
                <p id="feedbackText" class="text-lg font-bold"></p>
                <p id="correctAnswerText" class="text-sm text-gray-600 mt-1"></p>
            </div>

            <div class="mt-6 flex justify-center space-x-4">
                <button id="prevQuestionBtn" class="bg-gray-500 text-white font-semibold py-3 px-8 rounded-lg hover:bg-gray-600 transition-all duration-300">
                    C√¢u tr∆∞·ªõc
                </button>
                <button id="checkAnswerBtn" class="bg-green-600 text-white font-semibold py-3 px-8 rounded-lg hover:bg-green-700 transition-all duration-300">
                    Ki·ªÉm tra
                </button>
                <button id="nextQuestionBtn" class="bg-blue-600 text-white font-semibold py-3 px-8 rounded-lg hover:bg-blue-700 transition-all duration-300">
                    C√¢u ti·∫øp
                </button>
            </div>
        </div>
    </div>

    <script>
        // Ch·ªù to√†n b·ªô n·ªôi dung HTML ƒë∆∞·ª£c t·∫£i xong
        document.addEventListener('DOMContentLoaded', () => {
            // D·ªØ li·ªáu chuy√™n ƒë·ªÅ v√† c√¢u h·ªèi cho t·ª´ng m√¥n (mock data)
            const subjects = {
                customs_law: {
                    name: "Ph√°p lu·∫≠t h·∫£i quan",
                    topics: [
                        { name: "Ph√°p lu·∫≠t h·∫£i quan", wrongCount: 5, questions: [
                            { text: "Ngh·ªã ƒë·ªãnh n√†o quy ƒë·ªãnh chi ti·∫øt m·ªôt s·ªë ƒëi·ªÅu c·ªßa Lu·∫≠t H·∫£i quan v·ªÅ th·ªß t·ª•c h·∫£i quan, ki·ªÉm tra, gi√°m s√°t h·∫£i quan?", choices: ["Ngh·ªã ƒë·ªãnh 08/2015/Nƒê-CP", "Ngh·ªã ƒë·ªãnh 08/2013/Nƒê-CP", "Ngh·ªã ƒë·ªãnh 08/2014/Nƒê-CP", "Ngh·ªã ƒë·ªãnh 08/2016/Nƒê-CP"], answer: "Ngh·ªã ƒë·ªãnh 08/2015/Nƒê-CP", isWrong: true },
                            { text: "H√†ng h√≥a ph·∫£i ch·ªãu thu·∫ø ch·ªëng b√°n ph√° gi√° ƒë∆∞·ª£c quy ƒë·ªãnh t·∫°i vƒÉn b·∫£n n√†o?", choices: ["Th√¥ng t∆∞ 126/2018/TT-BTC", "Th√¥ng t∆∞ 127/2018/TT-BTC", "Th√¥ng t∆∞ 128/2018/TT-BTC", "Th√¥ng t∆∞ 129/2018/TT-BTC"], answer: "Th√¥ng t∆∞ 127/2018/TT-BTC", isWrong: true },
                            { text: "Theo ph√°p lu·∫≠t Vi·ªát Nam, th·ªùi ƒëi·ªÉm n√†o ƒë∆∞·ª£c coi l√† th·ªùi ƒëi·ªÉm xu·∫•t kh·∫©u, nh·∫≠p kh·∫©u h√†ng h√≥a?", choices: ["Th·ªùi ƒëi·ªÉm h√†ng h√≥a ƒë∆∞·ª£c x·∫øp l√™n ph∆∞∆°ng ti·ªán v·∫≠n t·∫£i", "Th·ªùi ƒëi·ªÉm c∆° quan h·∫£i quan ho√†n th√†nh th·ªß t·ª•c h·∫£i quan", "Th·ªùi ƒëi·ªÉm doanh nghi·ªáp nh·∫≠n ƒë∆∞·ª£c gi·∫•y ph√©p xu·∫•t nh·∫≠p kh·∫©u", "Th·ªùi ƒëi·ªÉm n·ªôp t·ªù khai h·∫£i quan"], answer: "Th·ªùi ƒëi·ªÉm c∆° quan h·∫£i quan ho√†n th√†nh th·ªß t·ª•c h·∫£i quan", isWrong: false },
                            { text: "Thu·∫ø nh·∫≠p kh·∫©u ∆∞u ƒë√£i ƒë·∫∑c bi·ªát √°p d·ª•ng cho h√†ng h√≥a c√≥ xu·∫•t x·ª© t·ª´ ƒë√¢u?", choices: ["C√°c n∆∞·ªõc c√≥ th·ªèa thu·∫≠n th∆∞∆°ng m·∫°i t·ª± do v·ªõi Vi·ªát Nam", "C√°c n∆∞·ªõc th√†nh vi√™n WTO", "T·∫•t c·∫£ c√°c n∆∞·ªõc", "C√°c n∆∞·ªõc ph√°t tri·ªÉn"], answer: "C√°c n∆∞·ªõc c√≥ th·ªèa thu·∫≠n th∆∞∆°ng m·∫°i t·ª± do v·ªõi Vi·ªát Nam", isWrong: true },
                            { text: "H√†ng h√≥a t·∫°m nh·∫≠p t√°i xu·∫•t ƒë·ªÉ tham gia h·ªôi ch·ª£, tri·ªÉn l√£m ƒë∆∞·ª£c mi·ªÖn thu·∫ø nh·∫≠p kh·∫©u trong tr∆∞·ªùng h·ª£p n√†o?", choices: ["Khi c√≥ gi·∫•y ph√©p c·ªßa B·ªô C√¥ng Th∆∞∆°ng", "Khi ƒë∆∞·ª£c t√°i xu·∫•t trong th·ªùi h·∫°n quy ƒë·ªãnh", "Khi c√≥ b·∫£o l√£nh c·ªßa ng√¢n h√†ng", "Khi ƒë∆∞·ª£c x√°c nh·∫≠n c·ªßa Ban t·ªï ch·ª©c h·ªôi ch·ª£"], answer: "Khi ƒë∆∞·ª£c t√°i xu·∫•t trong th·ªùi h·∫°n quy ƒë·ªãnh", isWrong: false }
                        ]},
                        { name: "Ch√≠nh s√°ch thu·∫ø", wrongCount: 3, questions: [] },
                        { name: "Vi ph·∫°m h√†nh ch√≠nh", wrongCount: 7, questions: [] }
                    ]
                },
                foreign_trade: {
                    name: "K·ªπ thu·∫≠t nghi·ªáp v·ª• ngo·∫°i th∆∞∆°ng",
                    topics: [
                        { name: "Giao nh·∫≠n v·∫≠n t·∫£i", wrongCount: 2, questions: [] },
                        { name: "Ngo·∫°i th∆∞∆°ng", wrongCount: 4, questions: [] },
                        { name: "Thanh to√°n qu·ªëc t·∫ø", wrongCount: 1, questions: [] }
                    ]
                },
                customs_tech: {
                    name: "K·ªπ thu·∫≠t nghi·ªáp v·ª• h·∫£i quan",
                    topics: [
                        { name: "Th·ªß t·ª•c h·∫£i quan", wrongCount: 10, questions: [
                            { text: "M·ªôt b·ªô h·ªì s∆° h·∫£i quan bao g·ªìm c√°c ch·ª©ng t·ª´ n√†o?", choices: ["T·ªù khai h·∫£i quan, H√≥a ƒë∆°n th∆∞∆°ng m·∫°i, V·∫≠n ƒë∆°n", "H·ª£p ƒë·ªìng ngo·∫°i th∆∞∆°ng, Gi·∫•y ch·ª©ng nh·∫≠n xu·∫•t x·ª©", "H√≥a ƒë∆°n th∆∞∆°ng m·∫°i, V·∫≠n ƒë∆°n, H·ª£p ƒë·ªìng", "T·∫•t c·∫£ c√°c ƒë√°p √°n tr√™n ƒë·ªÅu ƒë√∫ng"], answer: "T·ªù khai h·∫£i quan, H√≥a ƒë∆°n th∆∞∆°ng m·∫°i, V·∫≠n ƒë∆°n", isWrong: true },
                            { text: "T·ªù khai h·∫£i quan ƒëi·ªán t·ª≠ ƒë∆∞·ª£c n·ªôp cho c∆° quan n√†o?", choices: ["Chi c·ª•c H·∫£i quan n∆°i l√†m th·ªß t·ª•c", "C·ª•c H·∫£i quan t·ªânh, th√†nh ph·ªë", "T·ªïng c·ª•c H·∫£i quan", "B·ªô T√†i ch√≠nh"], answer: "Chi c·ª•c H·∫£i quan n∆°i l√†m th·ªß t·ª•c", isWrong: false },
                            { text: "H·ªì s∆° h·∫£i quan ph·∫£i ƒë∆∞·ª£c n·ªôp tr∆∞·ªõc th·ªùi ƒëi·ªÉm n√†o?", choices: ["Tr∆∞·ªõc 01 ng√†y h√†ng h√≥a ƒë·∫øn c·ª≠a kh·∫©u", "Tr∆∞·ªõc 08 gi·ªù l√†m vi·ªác h√†ng h√≥a ƒë·∫øn c·ª≠a kh·∫©u", "Trong v√≤ng 30 ng√†y k·ªÉ t·ª´ ng√†y h√†ng h√≥a ƒë·∫øn c·ª≠a kh·∫©u", "Tr∆∞·ªõc 30 ng√†y h√†ng h√≥a ƒë·∫øn c·ª≠a kh·∫©u"], answer: "Trong v√≤ng 30 ng√†y k·ªÉ t·ª´ ng√†y h√†ng h√≥a ƒë·∫øn c·ª≠a kh·∫©u", isWrong: true }
                        ]},
                        { name: "Ch√≠nh s√°ch m·∫∑t h√†ng", wrongCount: 6, questions: [] },
                        { name: "Tr·ªã gi√° h·∫£i quan", wrongCount: 8, questions: [] },
                        { name: "Xu·∫•t x·ª© h√†ng h√≥a", wrongCount: 3, questions: [] },
                        { name: "S·ªü h·ªØu tr√≠ tu·ªá", wrongCount: 1, questions: [] },
                        { name: "Ph√¢n lo·∫°i h√†ng h√≥a", wrongCount: 9, questions: [] }
                    ]
                }
            };
            
            // L·∫•y c√°c ph·∫ßn t·ª≠ c·∫ßn thi·∫øt
            const practiceModal = document.getElementById('practiceModal');
            const practiceModalTitle = document.getElementById('practiceModalTitle');
            const subjectSelection = document.getElementById('subjectSelection');
            const topicSelection = document.getElementById('topicSelection');
            const topicList = document.getElementById('topicList');
            const subjectButtons = document.querySelectorAll('.subjectBtn');
            const backToSubjectsBtn = document.getElementById('backToSubjectsBtn');
            const wrongAnswersModal = document.getElementById('wrongAnswersModal');
            const wrongAnswersContent = document.getElementById('wrongAnswersContent');
            const mockExamModal = document.getElementById('mockExamModal');
            const mockExamSubjectList = document.getElementById('mockExamSubjectList');
            const confirmMockExamModal = document.getElementById('confirmMockExamModal');
            const startMockExamBtn = document.getElementById('startMockExamBtn');
            const quizModal = document.getElementById('quizModal');
            const quizModalTitle = document.getElementById('quizModalTitle');
            const quizModalBackBtn = document.getElementById('quizModalBackBtn');
            const quizStatus = document.getElementById('quizStatus');
            const questionText = document.getElementById('questionText');
            const answersContainer = document.getElementById('answersContainer');
            const checkAnswerBtn = document.getElementById('checkAnswerBtn');
            const nextQuestionBtn = document.getElementById('nextQuestionBtn');
            const prevQuestionBtn = document.getElementById('prevQuestionBtn');
            const quizFeedback = document.getElementById('quizFeedback');
            const feedbackText = document.getElementById('feedbackText');
            const correctAnswerText = document.getElementById('correctAnswerText');

            let currentQuizQuestions = [];
            let currentQuestionIndex = 0;
            let currentQuizType = '';

            // H√†m hi·ªÉn th·ªã danh s√°ch chuy√™n ƒë·ªÅ cho ph·∫ßn √¥n t·∫≠p
            function renderPracticeTopics(subject) {
                const subjectData = subjects[subject];
                practiceModalTitle.textContent = subjectData.name;
                topicList.innerHTML = '';
                
                subjectData.topics.forEach(topic => {
                    const topicBtn = document.createElement('button');
                    topicBtn.className = 'w-full bg-blue-400 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-500 transition-all duration-300 topic-btn';
                    topicBtn.textContent = topic.name;
                    topicBtn.dataset.subject = subject;
                    topicBtn.dataset.topic = topic.name;
                    topicList.appendChild(topicBtn);
                });

                subjectSelection.classList.add('hidden');
                topicSelection.classList.remove('hidden');
                backToSubjectsBtn.classList.remove('hidden');

                // Th√™m s·ª± ki·ªán click cho c√°c n√∫t chuy√™n ƒë·ªÅ
                document.querySelectorAll('.topic-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const subjectName = btn.dataset.subject;
                        const topicName = btn.dataset.topic;
                        const subjectData = subjects[subjectName];
                        const topicData = subjectData.topics.find(t => t.name === topicName);
                        if (topicData && topicData.questions.length > 0) {
                            startQuiz(topicData.questions, topicData.name);
                        } else {
                            showCustomMessage("Chuy√™n ƒë·ªÅ n√†y ch∆∞a c√≥ c√¢u h·ªèi.");
                        }
                    });
                });
            }

            // H√†m quay l·∫°i m√†n h√¨nh ch·ªçn m√¥n √¥n t·∫≠p
            function backToSubjects() {
                practiceModalTitle.textContent = "√în t·∫≠p tr·∫Øc nghi·ªám";
                topicSelection.classList.add('hidden');
                backToSubjectsBtn.classList.add('hidden');
                subjectSelection.classList.remove('hidden');
            }

            // H√†m hi·ªÉn th·ªã Form c√¢u ƒë√£ tr·∫£ l·ªùi sai
            function renderWrongAnswersForm() {
                wrongAnswersContent.innerHTML = '';
                for (const subjectId in subjects) {
                    const subjectData = subjects[subjectId];
                    const subjectHeader = document.createElement('h3');
                    subjectHeader.className = 'text-xl font-bold text-gray-700 mt-4 mb-2';
                    subjectHeader.textContent = subjectData.name;
                    wrongAnswersContent.appendChild(subjectHeader);

                    const topicListContainer = document.createElement('div');
                    topicListContainer.className = 'space-y-2';

                    subjectData.topics.forEach(topic => {
                        const topicItem = document.createElement('div');
                        topicItem.className = 'flex justify-between items-center p-3 bg-gray-100 rounded-lg shadow-sm hover:bg-gray-200 transition-colors duration-200 wrong-topic-item cursor-pointer';
                        topicItem.dataset.topic = topic.name;
                        topicItem.dataset.subject = subjectId;

                        const topicName = document.createElement('span');
                        topicName.className = 'font-semibold text-gray-800';
                        topicName.textContent = topic.name;

                        const wrongCount = document.createElement('span');
                        wrongCount.className = 'text-red-500 font-bold';
                        wrongCount.textContent = `(${topic.wrongCount} c√¢u)`;

                        topicItem.appendChild(topicName);
                        topicItem.appendChild(wrongCount);
                        topicListContainer.appendChild(topicItem);
                    });
                    wrongAnswersContent.appendChild(topicListContainer);
                }

                // Th√™m s·ª± ki·ªán click cho c√°c item chuy√™n ƒë·ªÅ sai
                document.querySelectorAll('.wrong-topic-item').forEach(item => {
                    item.addEventListener('click', () => {
                        const subjectName = item.dataset.subject;
                        const topicName = item.dataset.topic;
                        const subjectData = subjects[subjectName];
                        const topicData = subjectData.topics.find(t => t.name === topicName);
                        
                        if (topicData) {
                            const wrongQuestions = topicData.questions.filter(q => q.isWrong);
                            if (wrongQuestions.length > 0) {
                                startQuiz(wrongQuestions, `C√¢u tr·∫£ l·ªùi sai - ${topicName}`);
                            } else {
                                showCustomMessage("Chuy√™n ƒë·ªÅ n√†y ch∆∞a c√≥ c√¢u h·ªèi sai.");
                            }
                        } else {
                             showCustomMessage("Kh√¥ng t√¨m th·∫•y chuy√™n ƒë·ªÅ.");
                        }
                    });
                });
            }
            
            // H√†m hi·ªÉn th·ªã danh s√°ch m√¥n thi th·ª≠
            function renderMockExamSubjects() {
                mockExamSubjectList.innerHTML = '';
                for (const subjectId in subjects) {
                    const subjectData = subjects[subjectId];
                    const subjectBtn = document.createElement('button');
                    subjectBtn.className = 'mockExamSubjectBtn bg-blue-500 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-600 transition-all duration-300';
                    subjectBtn.textContent = subjectData.name;
                    subjectBtn.dataset.subject = subjectId;
                    mockExamSubjectList.appendChild(subjectBtn);
                }
                
                // Th√™m s·ª± ki·ªán click cho c√°c n√∫t m√¥n thi th·ª≠
                document.querySelectorAll('.mockExamSubjectBtn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const subject = btn.dataset.subject;
                        confirmMockExamModal.dataset.subject = subject; // L∆∞u m√¥n thi ƒë√£ ch·ªçn
                        closeModal('mockExamModal');
                        confirmMockExamModal.classList.remove('hidden');
                    });
                });
            }

            // B·∫Øt ƒë·∫ßu thi th·ª≠ sau khi x√°c nh·∫≠n
            startMockExamBtn.addEventListener('click', () => {
                const selectedSubject = confirmMockExamModal.dataset.subject;
                const subjectName = subjects[selectedSubject].name;
                showCustomMessage(`T√≠nh nƒÉng thi th·ª≠ m√¥n ${subjectName} ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn.`);
                closeModal('confirmMockExamModal');
            });

            // H√†m b·∫Øt ƒë·∫ßu b√†i quiz
            function startQuiz(questions, title) {
                currentQuizQuestions = questions;
                currentQuestionIndex = 0;
                
                practiceModal.classList.add('hidden');
                wrongAnswersModal.classList.add('hidden');
                mockExamModal.classList.add('hidden');
                confirmMockExamModal.classList.add('hidden');
                quizModal.classList.remove('hidden');
                
                quizModalTitle.textContent = title;
                displayQuestion();
            }

            // H√†m hi·ªÉn th·ªã c√¢u h·ªèi hi·ªán t·∫°i
            function displayQuestion() {
                const question = currentQuizQuestions[currentQuestionIndex];
                if (!question) return;

                quizStatus.textContent = `C√¢u ${currentQuestionIndex + 1}/${currentQuizQuestions.length}`;
                questionText.textContent = question.text;
                answersContainer.innerHTML = '';
                quizFeedback.classList.add('hidden');
                checkAnswerBtn.classList.remove('hidden');
                nextQuestionBtn.classList.add('hidden');
                prevQuestionBtn.disabled = currentQuestionIndex === 0;

                question.choices.forEach(choice => {
                    const answerBtn = document.createElement('button');
                    answerBtn.className = 'w-full text-left p-3 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors duration-200';
                    answerBtn.textContent = choice;
                    answerBtn.addEventListener('click', () => selectAnswer(answerBtn));
                    answersContainer.appendChild(answerBtn);
                });
            }

            // H√†m x·ª≠ l√Ω khi ng∆∞·ªùi d√πng ch·ªçn ƒë√°p √°n
            function selectAnswer(selectedBtn) {
                document.querySelectorAll('#answersContainer button').forEach(btn => {
                    btn.classList.remove('bg-blue-200', 'bg-red-200', 'bg-green-200', 'border-blue-500', 'border-red-500', 'border-green-500');
                });
                selectedBtn.classList.add('bg-blue-200', 'border-blue-500');
            }

            // H√†m ki·ªÉm tra ƒë√°p √°n
            function checkAnswer() {
                const question = currentQuizQuestions[currentQuestionIndex];
                const selectedBtn = document.querySelector('#answersContainer button.bg-blue-200');
                if (!selectedBtn) {
                    // Kh√¥ng d√πng alert() m√† d√πng custom modal
                    showCustomMessage('Vui l√≤ng ch·ªçn m·ªôt ƒë√°p √°n.');
                    return;
                }

                const isCorrect = selectedBtn.textContent === question.answer;

                if (isCorrect) {
                    selectedBtn.classList.add('bg-green-200', 'border-green-500');
                    feedbackText.textContent = 'Ch√≠nh x√°c! üéâ';
                    feedbackText.classList.add('text-green-600');
                } else {
                    selectedBtn.classList.add('bg-red-200', 'border-red-500');
                    feedbackText.textContent = 'Ch∆∞a ch√≠nh x√°c. ü§î';
                    feedbackText.classList.add('text-red-600');
                    // Highlight ƒë√°p √°n ƒë√∫ng
                    document.querySelectorAll('#answersContainer button').forEach(btn => {
                        if (btn.textContent === question.answer) {
                            btn.classList.add('bg-green-200', 'border-green-500');
                        }
                    });
                }
                
                quizFeedback.classList.remove('hidden');
                checkAnswerBtn.classList.add('hidden');
                nextQuestionBtn.classList.remove('hidden');
                
                // V√¥ hi·ªáu h√≥a t·∫•t c·∫£ c√°c n√∫t ƒë√°p √°n sau khi ki·ªÉm tra
                document.querySelectorAll('#answersContainer button').forEach(btn => btn.disabled = true);
            }

            // H√†m chuy·ªÉn c√¢u h·ªèi
            function nextQuestion() {
                if (currentQuestionIndex < currentQuizQuestions.length - 1) {
                    currentQuestionIndex++;
                    displayQuestion();
                } else {
                    // Kh√¥ng d√πng alert() m√† d√πng custom modal
                    showCustomMessage('B·∫°n ƒë√£ ho√†n th√†nh t·∫•t c·∫£ c√¢u h·ªèi c·ªßa chuy√™n ƒë·ªÅ n√†y!');
                    closeModal('quizModal');
                }
            }

            function prevQuestion() {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    displayQuestion();
                }
            }
            
            // H√†m ƒë√≥ng modal
            function closeModal(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.add('hidden');
                }
            }
            
            // H√†m hi·ªÉn th·ªã th√¥ng b√°o t√πy ch·ªânh thay cho alert()
            function showCustomMessage(message) {
                const existingMsg = document.getElementById('customMessageModal');
                if (existingMsg) existingMsg.remove();
                
                const modalHTML = `
                    <div id="customMessageModal" class="modal-overlay">
                        <div class="modal-content">
                            <p class="text-center text-lg font-semibold text-gray-800">${message}</p>
                            <div class="mt-4 flex justify-center">
                                <button data-modal-close="customMessageModal" class="bg-blue-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-blue-700 transition-all duration-300">OK</button>
                            </div>
                        </div>
                    </div>
                `;
                document.body.insertAdjacentHTML('beforeend', modalHTML);
                
                const closeBtn = document.querySelector('#customMessageModal button');
                closeBtn.addEventListener('click', () => {
                    closeModal('customMessageModal');
                });
            }

            // Th√™m s·ª± ki·ªán click cho c√°c n√∫t m·ªü modal b·∫±ng thu·ªôc t√≠nh data-modal-target
            const openModalBtns = document.querySelectorAll('[data-modal-target]');
            openModalBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const modalId = btn.dataset.modalTarget;
                    const modal = document.getElementById(modalId);
                    if (modal) {
                        modal.classList.remove('hidden');
                    }
                    
                    if (modalId === 'practiceModal') {
                        backToSubjects();
                    }
                    if (modalId === 'wrongAnswersModal') {
                        renderWrongAnswersForm();
                    }
                    if (modalId === 'mockExamModal') {
                        renderMockExamSubjects();
                    }
                });
            });

            // L·∫•y t·∫•t c·∫£ c√°c n√∫t ƒë√≥ng modal b·∫±ng thu·ªôc t√≠nh data-modal-close
            const closeModalBtns = document.querySelectorAll('[data-modal-close]');
            closeModalBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    closeModal(btn.dataset.modalClose);
                });
            });

            // L·∫∑p qua c√°c overlay v√† th√™m s·ª± ki·ªán click ƒë·ªÉ ƒë√≥ng modal khi click ra ngo√†i
            const modalOverlays = document.querySelectorAll('.modal-overlay');
            modalOverlays.forEach(overlay => {
                overlay.addEventListener('click', (event) => {
                    if (event.target === overlay) {
                        closeModal(overlay.id);
                    }
                });
            });

            // Th√™m s·ª± ki·ªán click cho c√°c n√∫t m√¥n h·ªçc (ph·∫ßn √¥n t·∫≠p)
            subjectButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const subject = btn.dataset.subject;
                    renderPracticeTopics(subject);
                });
            });

            // Th√™m s·ª± ki·ªán cho c√°c n√∫t ƒëi·ªÅu h∆∞·ªõng trong quiz
            checkAnswerBtn.addEventListener('click', checkAnswer);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            prevQuestionBtn.addEventListener('click', prevQuestion);
            quizModalBackBtn.addEventListener('click', () => closeModal('quizModal'));
        });
    </script>
</body>
</html>
